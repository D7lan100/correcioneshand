{% extends './base_no_nav.html' %}
{% block title %}Recuperar contraseña{% endblock %}

{% block customCSS %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
{% endblock %}

{% block content %}
<div class="login-container">
  <!-- Panel izquierdo con branding -->
  <div class="left-panel">
    <img src="{{ url_for('static', filename='img/logo2.png')}}" alt="Logo" class="logo">
    <p>
      ¿Olvidaste tu contraseña? <br>
      Ingresa tu correo electrónico y te enviaremos un <strong>código de recuperación</strong>.
    </p>
  </div>

  <!-- Panel derecho con formulario -->
  <div class="right-panel">
    <!-- Mensajes flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Formulario -->
    <form class="form" method="POST" action="{{ url_for('auth_bp.forgot_password') }}">
      <h2 class="form-title">Recuperar contraseña</h2>
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <div class="mb-3">
        <label for="email" class="form-label">Correo electrónico</label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          placeholder="Ingrese su correo" 
          class="form-control" 
          required>
      </div>

      <button type="submit" class="btn btn-primary w-100">Enviar código</button>

      <div class="extra-links mt-3 text-center">
        <a href="{{ url_for('auth_bp.login') }}">Volver al Inicio de Sesion</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
